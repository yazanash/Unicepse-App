<Window x:Class="Uniceps.Views.RoutineTemplateViews.RoutineComponent.ExercisesListViewWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Uniceps.Views.RoutineTemplateViews.RoutineComponent"
        mc:Ignorable="d"
                     xmlns:icons="http://metro.mahapps.com/winfx/xaml/iconpacks"
 xmlns:routinecomponent="clr-namespace:Uniceps.Views.RoutineTemplateViews.RoutineComponent"
 xmlns:cs="clr-namespace:Uniceps.Components"
FlowDirection="RightToLeft"
        WindowState="Maximized"
        Background="{DynamicResource Brush.Background}"
        WindowStartupLocation="CenterScreen"
        Title="اختيار التمارين الرياضية" Height="450" Width="800">
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="boolToVis"/>
        <Style x:Key="NewExercisesListBoxItemContainerStyle" TargetType="{x:Type ListBoxItem}">
            <Setter Property="OverridesDefaultStyle" Value="True"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="SnapsToDevicePixels" Value="True"/>
            <Setter Property="Padding" Value="5"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="FocusVisualStyle" Value="{StaticResource FocusVisual}"/>
            <Setter Property="IsSelected" Value="{Binding IsSelected,UpdateSourceTrigger=PropertyChanged}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate   TargetType="{x:Type ListBoxItem}">

                        <Border  x:Name="Bd"  Margin="5" Style="{DynamicResource StaticCardBorderStyle}">
                            <DockPanel >
                                <Image Width="150"
            Source="{Binding ExerciseImage}"
             RenderOptions.BitmapScalingMode="HighQuality"
RenderOptions.EdgeMode="Aliased"
            Height="150" DockPanel.Dock="Top"/>
                                <StackPanel Orientation="Vertical" Margin="5" HorizontalAlignment="Center" DockPanel.Dock="Top" VerticalAlignment="Center">
                                    <TextBlock HorizontalAlignment="Center" Width="200" TextAlignment="Center" TextWrapping="Wrap" Text="{Binding ExerciseName}" Foreground="{DynamicResource Brush.Foreground}" Margin="0 0 0 5"  FontSize="14" />
                                    <TextBlock Text="هذا التمرين مضاف مسبقا" Foreground="{DynamicResource Brush.Foreground}" Visibility="{Binding IsChecked,Converter={StaticResource boolToVis}}" Margin="0 0 0 5" HorizontalAlignment="Center" FontSize="14" />
                                </StackPanel>

                            </DockPanel>
                        </Border>
                        <ControlTemplate.Triggers>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsMouseOver" Value="True"/>
                                </MultiTrigger.Conditions>
                                <Setter Property="Background" TargetName="Bd" Value="{DynamicResource Brush.Card}"/>
                            </MultiTrigger>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="Selector.IsSelectionActive" Value="False"/>
                                    <Condition Property="IsSelected" Value="True"/>
                                </MultiTrigger.Conditions>
                                <Setter Property="Background" TargetName="Bd" Value="{DynamicResource Brush.Card}"/>
                                <Setter Property="BorderBrush" TargetName="Bd" Value="{DynamicResource Brush.Primary}"/>
                                <Setter Property="BorderThickness" TargetName="Bd" Value="2"/>
                                <Setter Property="TextElement.Foreground" TargetName="Bd" Value="{DynamicResource Brush.Foreground}"/>
                            </MultiTrigger>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="Selector.IsSelectionActive" Value="True"/>
                                    <Condition Property="IsSelected" Value="True"/>
                                </MultiTrigger.Conditions>
                                <Setter Property="Background" TargetName="Bd" Value="{DynamicResource Brush.Card}"/>
                                <Setter Property="BorderBrush" TargetName="Bd" Value="{DynamicResource Brush.Primary}"/>
                                <Setter Property="TextElement.Foreground" TargetName="Bd" Value="{DynamicResource Brush.Foreground}"/>
                                <Setter Property="BorderThickness" TargetName="Bd" Value="2"/>
                            </MultiTrigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="TextElement.Foreground" TargetName="Bd" Value="{DynamicResource Brush.Foreground}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Border Padding="5">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="auto"/>
                <RowDefinition Height="auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <Border Grid.Row="0"  Padding="5" >
                <Grid Grid.Row="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="auto" />
                    </Grid.ColumnDefinitions>
                    <StackPanel Grid.Row="0" Grid.Column="0"  Margin="5" Orientation="Horizontal" >

                        <ListBox  BorderThickness="0" Background="Transparent"
       ItemsSource="{Binding MuscleGroupList,UpdateSourceTrigger=PropertyChanged}" SelectedItem="{Binding SelectedMuscle,UpdateSourceTrigger=PropertyChanged}" 
       ItemContainerStyle="{StaticResource MuscelListBoxItemContainerStyle1}">
                            <ListBox.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel Orientation="Horizontal"/>
                                </ItemsPanelTemplate>
                            </ListBox.ItemsPanel>
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Name}" FontSize="12"   />
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </StackPanel>
                    <Button Style="{StaticResource AddBtn}" Margin="10 0" Grid.Column="3" Command="{Binding AddToRoutineCommand}">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="اضافة"/>
                            <TextBlock Margin="5 0" Text="{Binding SelectedCount}"/>
                        </StackPanel>
                    </Button>
                </Grid>
            </Border>


            <Border Grid.Row="2">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <ListBox Background="Transparent"   HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch" BorderThickness="0" SelectionMode="Multiple" Grid.Row="2" ItemsSource="{Binding ExercisesList}" ItemContainerStyle="{StaticResource NewExercisesListBoxItemContainerStyle}">
                        <ListBox.ItemsPanel>
                            <ItemsPanelTemplate>
                                <UniformGrid Columns="5" />
                            </ItemsPanelTemplate>
                        </ListBox.ItemsPanel>
                    </ListBox>
                </Grid>
            </Border>



        </Grid>
    </Border>
</Window>
