<Window x:Class="Uniceps.Views.BackupAndRestoreViewWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Uniceps.Views"
        mc:Ignorable="d"
              xmlns:Icon="http://metro.mahapps.com/winfx/xaml/iconpacks"
        xmlns:Converters="clr-namespace:Uniceps.utlis.Converters"
FlowDirection="RightToLeft"
      WindowStartupLocation="CenterScreen"
      Background="{DynamicResource Brush.Background}"
        Title="النسخ الاحتياطي والاسترجاع" Height="350" Width="350">
    <Window.Resources>
        <Style x:Key="ModernTabItemStyle" TargetType="TabItem">
            <Setter Property="Foreground" Value="{DynamicResource Brush.Foreground}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TabItem">
                        <Border Name="Border" 
                                CornerRadius="0"
                                BorderThickness="0,0,0,3"
                                Margin="0 0 5 0"
                       Style="{DynamicResource CardBorderStyle}">
                            <ContentPresenter x:Name="ContentSite"
                                    VerticalAlignment="Center"
                                    HorizontalAlignment="Center"
                                    ContentSource="Header" />
                        </Border>

                        <ControlTemplate.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="{DynamicResource Brush.Surface}" />
                                <Setter TargetName="Border" Property="BorderBrush" Value="{DynamicResource Brush.Primary}" />
                                <Setter TargetName="Border" Property="BorderThickness" Value="0,0,0,3" />
                            </Trigger>

                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#10FFFFFF" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    <Border Padding="5" >
        <Grid Grid.Row="1" >
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="auto"/>
            </Grid.RowDefinitions>
            <TabControl Background="{DynamicResource Brush.Background}" BorderThickness="0">
                <TabItem Style="{DynamicResource ModernTabItemStyle}" Header="النسخ الاحتياطي" >
                   
                    <Border Style="{DynamicResource CardBorderStyle}" Grid.Column="0"  Grid.Row="0"  Padding="5">

                        <DockPanel   >
                            <DockPanel DockPanel.Dock="Top" >
                                <TextBlock Text="النسخ الاحتياطي" Foreground="{DynamicResource  Brush.Foreground}" FontSize="24" DockPanel.Dock="Left"/>
                            </DockPanel>
                            <Grid >
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="auto"/>
                                    <RowDefinition Height="auto"/>
                                    <RowDefinition Height="auto"/>
                                    <RowDefinition Height="auto"/>
                                </Grid.RowDefinitions>
                                <StackPanel Grid.Row="0" Grid.Column="0" Margin="5">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="مسار الحفظ" 
Margin="0 0 0 8" Foreground="{DynamicResource  Brush.Foreground}"
FontSize="18"/>
                                        <Button Command="{Binding ChangeFolderPathCommand}" Style="{DynamicResource BorderedIconBtn}" Margin="10 0">
                                            <Icon:PackIconMaterial Kind="FolderSearchOutline" Width="20" Height="20"/>
                                        </Button>
                                    </StackPanel>

                                    <TextBox IsReadOnly="True" Text="{Binding FolderPath, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource textBoxStyle}"/>

                                </StackPanel>

                                <StackPanel Orientation="Horizontal" Grid.Row="1" Grid.Column="1" Margin="0 10"  HorizontalAlignment="Center">
                                    <Button Command="{Binding ExportBackup}" Style="{StaticResource FormButton}" Width="200" Grid.Column="0" Grid.Row="4"  Content="انشاء نسخ احتياطي"  HorizontalAlignment="Center">
                                    </Button>
                                </StackPanel>

                            </Grid>

                        </DockPanel>

                    </Border>
                </TabItem>
                <TabItem Header="الاسترجاع" Style="{DynamicResource ModernTabItemStyle}">
                    <Border Grid.Column="1" Style="{DynamicResource CardBorderStyle}"  Grid.Row="0"  Padding="5">

                        <DockPanel   >
                            <DockPanel DockPanel.Dock="Top" >
                                <TextBlock Text="الاسترجاع" Foreground="{DynamicResource  Brush.Foreground}" FontSize="24" DockPanel.Dock="Left"/>
                            </DockPanel>
                            <Grid >
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="auto"/>
                                    <RowDefinition Height="auto"/>
                                    <RowDefinition Height="auto"/>
                                    <RowDefinition Height="auto"/>
                                </Grid.RowDefinitions>
                                <StackPanel Grid.Row="1" Grid.Column="0" Margin="5">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="ملف النسخ " 
Margin="0 0 0 8" Foreground="{DynamicResource  Brush.Foreground}"
FontSize="18"/>
                                        <Button Command="{Binding ChooseImportBackupCommand}" Style="{DynamicResource BorderedIconBtn}" Margin="10 0">
                                            <Icon:PackIconMaterial Kind="FileSearchOutline" Width="20" Height="20"/>
                                        </Button>
                                    </StackPanel>

                                    <TextBox IsReadOnly="True" Text="{Binding FilePath, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource textBoxStyle}"/>

                                </StackPanel>



                                <StackPanel Orientation="Horizontal" Grid.Row="3" Grid.Column="1" Margin="0 10"  HorizontalAlignment="Center">
                                    <Button Command="{Binding ImportBackup}" Style="{StaticResource FormButton}" Width="200" Grid.Column="0" Grid.Row="4"  Content="استرجاع"  HorizontalAlignment="Center">
                                    </Button>
                                </StackPanel>

                            </Grid>

                        </DockPanel>

                    </Border>
                </TabItem>
            </TabControl>
         
           
            <StackPanel Grid.Row="1" Grid.ColumnSpan="2"  >
                <TextBlock Text="{Binding ProgressMessage}" 
Margin="0 0 0 8" Foreground="{DynamicResource  Brush.Foreground}"
FontSize="14"/>
                <ProgressBar Margin="0 5" Value="{Binding Progress}" Height="10" Foreground="{DynamicResource Brush.Primary}" Background="{DynamicResource Brush.Background}"/>
            </StackPanel>
        </Grid>
    </Border>
</Window>
